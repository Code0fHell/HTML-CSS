<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Trang thống kê</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="./assets/css/admin.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="./assets/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./assets/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./assets/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./assets/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./assets/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./assets/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./assets/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="./assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="./assets/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <style>
        /* Kiểu và kích thước cho bảng và biểu đồ */
        .charts-container {
            display: flex;
            gap: 20px;
            justify-content: space-around;
        }

        #datatablesSimple {
            width: 100%;
        }

        canvas {
            width: 50% !important;
            height: 500px !important;
        }
    </style>
</head>

<body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" href="./dashboard.html">
            <img src="./assets/img/PTIT.png" alt="" class="logo" />
        </a>
        <!-- Sidebar Toggle-->
        <button
            class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0"
            id="sidebarToggle"
            href="#!"
        >
            <i class="fas fa-bars"></i>
        </button>
        <!-- Navbar Search-->
        <form
            class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0"
        ></form>
        <!-- Navbar-->
        <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
            <li class="nav-item dropdown">
                <a
                    class="nav-link dropdown-toggle"
                    id="navbarDropdown"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                    ><i class="fas fa-user fa-fw"></i
                ></a>
                <ul
                    class="dropdown-menu dropdown-menu-end"
                    aria-labelledby="navbarDropdown"
                >
                    <li class="dropdown-item">Admin</li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                        <a class="dropdown-item" href="adminSignin.html"
                            >Logout</a
                        >
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">home</div>

                        <!-- chuyển trang theo yêu cầu -->
                        <a class="nav-link" href="dashboard.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Admin Dashboard
                        </a>
                        <div class="sb-sidenav-menu-heading">Chức năng</div>
            
                        <a class="nav-link" href="exam.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Kỳ thi
                        </a>
                        <a class="nav-link" href="trang_thong_ke.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Thống kê
                        </a>
                        <!-- thông tin sinh viên -->
                        <a class="nav-link" href="StudentInfo.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Thông tin sinh viên
                        </a>
                    </div>
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <h1 class="mt-4">Trang thống kê</h1>
                    <ol class="breadcrumb mb-4">
                        <li class="breadcrumb-item"><a href="dashboard.html">Dashboard</a></li>
                        <li class="breadcrumb-item active"><a href="trang_thong_ke.html">Trang thống kê</a></li>
                    </ol>
                    <div class="card mb-4">
                        <div class="card-body">
                            Trang tra cứu và hiển thị thống kê.
                        </div>

                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            Danh sách sinh viên
                        </div>
                        <div class="card-body">
                            <table id="datatablesSimple">
                                <thead>
                                    <tr>
                                        <th>Họ và tên</th>
                                        <th>Môn thi</th>
                                        <th>Số lần tham gia</th>
                                        <th>Tỷ lệ hoàn thành</th>
                                        <th>Điểm trung bình</th>
                                        <th>Phân phối điểm số</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td id="ten-sinh-vien">Hoàng Anh Quân</td>
                                        <td>Toán</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>8.5</td>
                                        <td>8-9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Hoàng Anh Quân</td>
                                        <td>Hóa học</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>8</td>
                                        <td>7-9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Hoàng Anh Quân</td>
                                        <td>Vật lý</td>
                                        <td>1</td>
                                        <td>100%</td>
                                        <td>8.5</td>
                                        <td>8.5</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Hoàng Ngọc Minh</td>
                                        <td>Toán</td>
                                        <td>2</td>
                                        <td>
                                            <il style="color: red;">85%</il>
                                        </td>
                                        <td>8</td>
                                        <td>7-9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Hoàng Ngọc Minh</td>
                                        <td>Hóa học</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>8.5</td>
                                        <td>8-9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Hoàng Ngọc Minh</td>
                                        <td>Vật lý</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>10</td>
                                        <td>10</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Đặng Quý Bình</td>
                                        <td>Hóa học</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>9</td>
                                        <td>9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Đặng Quý Bình</td>
                                        <td>Vật lý</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>9</td>
                                        <td>8-10</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Đặng Quý Bình</td>
                                        <td>Toán học</td>
                                        <td>1</td>
                                        <td>100%</td>
                                        <td>8.5</td>
                                        <td>8.5</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Bùi Trường Sơn</td>
                                        <td>Hóa học</td>
                                        <td>1</td>
                                        <td>100%</td>
                                        <td>9</td>
                                        <td>9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Bùi Trường Sơn</td>
                                        <td>Toán</td>
                                        <td>3</td>
                                        <td>100%</td>
                                        <td>9.33</td>
                                        <td>9-10</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Bùi Trường Sơn</td>
                                        <td>Vật lý</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>9</td>
                                        <td>8-10</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Nguyễn Đình Hậu</td>
                                        <td>Toán</td>
                                        <td>1</td>
                                        <td>100%</td>
                                        <td>9</td>
                                        <td>9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Nguyễn Đình Hậu</td>
                                        <td>Hóa học</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>8</td>
                                        <td>7-9</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Nguyễn Đình Hậu</td>
                                        <td>Vật lý</td>
                                        <td>2</td>
                                        <td>100%</td>
                                        <td>9</td>
                                        <td>8-10</td>
                                    </tr>

                                    <tr>
                                        <td id="ten-sinh-vien">Nguyễn Duy Khánh</td>
                                        <td>Toán</td>
                                        <td>2</td>
                                        <td>
                                            <il style="color: red;">70%</il>
                                        </td>
                                        <td>7</td>
                                        <td>6-8</td>
                                    </tr>
                                    

                                </tbody>
                            </table>
                            <button id="saveButton" type="button" class="btn btn-success mt-3"
                            onclick="saveStudentInfo(this)">Tìm kiếm</button>
                        </div>
                    </div>
                    <div class="charts-container">
                        <!-- Mã JavaScript để tạo biểu đồ -->
                        <script>
                            document.addEventListener("DOMContentLoaded", function() {
                                // Lấy dữ liệu từ bảng HTML
                                var data = {
                                    labels: ["8-9", "7-9", "8.5", "9", "10", "6-8"],
                                    datasets: [{
                                        label: 'Phân phối điểm số',
                                        data: [2, 4, 2, 6, 4, 1],
                                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                        borderColor: 'rgba(75, 192, 192, 1)',
                                        borderWidth: 1
                                    }]
                                };
            
                                // Tạo biểu đồ cột
                                var ctxColumn = document.createElement('canvas').getContext('2d');
                                var columnChart = new Chart(ctxColumn, {
                                    type: 'bar',
                                    data: data,
                                    options: {
                                        scales: {
                                            y: {
                                                beginAtZero: true
                                            }
                                        }
                                    }
                                });
            
                                // Lấy tỷ lệ hoàn thành từ bảng HTML
                                var completionData = [100, 85, 100, 100, 100, 70, 100, 100, 100, 100, 100, 100, 100, 100];
            
                                // Tạo biểu đồ tròn
                                var ctxDoughnut = document.createElement('canvas').getContext('2d');
                                var doughnutChart = new Chart(ctxDoughnut, {
                                    type: 'doughnut',
                                    data: {
                                        labels: ['Hoàn thành', 'Chưa hoàn thành'],
                                        datasets: [{
                                            data: [completionData.filter(x => x === 100).length, completionData.filter(x => x < 100).length],
                                            backgroundColor: ['rgba(75, 192, 192, 0.2)', 'rgba(255, 99, 132, 0.2)'],
                                            borderColor: ['rgba(75, 192, 192, 1)', 'rgba(255, 99, 132, 1)'],
                                            borderWidth: 1
                                        }]
                                    }
                                });
            
                                // Thêm canvas của biểu đồ cột và biểu đồ tròn vào DOM
                                var chartsContainer = document.querySelector('.charts-container');
                                chartsContainer.appendChild(ctxColumn.canvas);
                                chartsContainer.appendChild(ctxDoughnut.canvas);
                            });
                        </script>
                    </div>
                    <button class="btn btn-primary" id="print-result" type="submit">Xuất báo cáo</button>
                </div>
            </main>
            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid px-4">
                    <div
                        class="d-flex align-items-center justify-content-between small"
                    >
                        <div class="text-muted">
                           Copyright@2024-Nhóm 06
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"
        crossorigin="anonymous"></script>
    <script src="js/datatables-simple-demo.js"></script>
    <script src="js/onscripts.js"></script>
</body>

</html>